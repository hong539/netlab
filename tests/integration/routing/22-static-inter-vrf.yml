---
message: |
  Use this topology to test inter- VRF IPv4 and IPv6 static routes. DUT has
  to have static routes for loopback addresses of X1 and X2.

defaults.sources.extra: [ defaults-ds.yml ]

groups:
  probes:
    device: linux
    provider: clab
    members: [ x1, x2 ]

vrfs:
  red:
    links: [ dut-x1 ]
  blue:
    links: [ dut-x2 ]

nodes:
  dut:
    module: [ routing, vrf ]
    routing.static:
    - node: x1
      vrf: blue
      nexthop:
        node: x1
        vrf: red
    - node: x2
      vrf: red
      nexthop:
        node: x2
        vrf: blue
  x1:
  x2:

validate:
  ping_v4:
    description: IPv4 ping X2 from X1
    nodes: [ x2 ]
    plugin: ping(nodes.x2.interfaces[0].ipv4,af='ipv4')
  ping_v6:
    description: IPv6 ping X2 from X1
    nodes: [ x2 ]
    plugin: ping(nodes.x2.interfaces[0].ipv6,af='ipv6')
